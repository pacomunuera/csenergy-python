% Definimos las características del documento y añadimos una serie de paquetes (\usepackage{package}) que agregan funcionalidades a LaTeX.

\documentclass[12pt]{report} %fuente a 12pt

% MÁRGENES: 2,5 cm sup. e inf.; 3 cm izdo. y dcho.
\usepackage[
a4paper,
vmargin=2.5cm,
hmargin=3cm
]{geometry}


% INTERLINEADO: Estrecho (6 ptos./interlineado 1,15) o Moderado (6 ptos./interlineado 1,5)
\renewcommand{\baselinestretch}{1.5}
\parskip=6pt

\usepackage{enumitem}

% DEFINICIÓN DE COLORES para portada y listados de código
\usepackage[table]{xcolor}
\definecolor{verdeUNED}{RGB}{0, 86, 63}
\definecolor{azulELECTRICIDAD}{RGB}{10, 170, 220}
\definecolor{gray97}{gray}{.97}
\definecolor{gray75}{gray}{.75}
\definecolor{gray45}{gray}{.45}

% Soporte para GENERAR PDF/A --es importante de cara a su inclusión en e-Archivo porque es el formato óptimo de preservación y a la generación de metadatos, tal y como se describe en http://uc3m.libguides.com/ld.php?content_id=31389625. En la carpeta incluímos el archivo plantilla_tfg_2017.xmpdata en el que puedes incluir los metadatos que se incorporarán al archivo PDF cuando lo compiles. Ese archivo debe llamarse igual que tu archivo .tex. Puedes ver un ejemplo en esta misma carpeta.
\usepackage[a-1b]{pdfx}

% ENLACES
\usepackage{hyperref}
\hypersetup{
	colorlinks=true,
	citecolor=black,
	linkcolor=black, % enlaces a partes del documento (p.e. índice) en color negro
	urlcolor=blue} % enlaces a recursos fuera del documento en azul

% EXPRESIONES MATEMATICAS
\usepackage{amsmath,amssymb,amsfonts,amsthm}


\usepackage{txfonts} 
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}

\usepackage[spanish, es-tabla]{babel} % información sobre el paquete babel para español http://osl.ugr.es/CTAN/language/spanish/babel/base/spanish.pdf
\usepackage[babel, spanish=spanish]{csquotes}
\AtBeginEnvironment{quote}{\small}

% diseño de PIE DE PÁGINA
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\rfoot{\thepage}
\fancypagestyle{plain}{\pagestyle{fancy}}

% DISEÑO DE LOS TÍTULOS de las partes del trabajo (capítulos y epígrafes o subcapítulos)
\usepackage{titlesec}
\usepackage{titletoc}
\titleformat{\chapter}[block]
{\large\bfseries\filcenter}
{\thechapter.}
{5pt}
{\MakeUppercase}
{}
\titlespacing{\chapter}{0pt}{0pt}{*3}
\titlecontents{chapter}
[0pt]                                               
{}
{\contentsmargin{0pt}\thecontentslabel.\enspace\uppercase}
{\contentsmargin{0pt}\uppercase}                        
{\titlerule*[.7pc]{.}\contentspage}                 

\titleformat{\section}
{\bfseries}
{\thesection.}
{5pt}
{}
\titlecontents{section}
[5pt]                                               
{}
{\contentsmargin{0pt}\thecontentslabel.\enspace}
{\contentsmargin{0pt}}
{\titlerule*[.7pc]{.}\contentspage}

\titleformat{\subsection}
{\normalsize\bfseries}
{\thesubsection.}
{5pt}
{}
\titlecontents{subsection}
[10pt]                                               
{}
{\contentsmargin{0pt}                          
	\thecontentslabel.\enspace}
{\contentsmargin{0pt}}                        
{\titlerule*[.7pc]{.}\contentspage}  



% DISEÑO DE TABLAS. Puedes elegir entre el estilo para ingeniería o para ciencias sociales y humanidades. Por defecto, está activado el estilo de ingeniería. Si deseas utilizar el otro, comenta las líneas del diseño de ingeniería y descomenta las del diseño de ciencias sociales y humanidades
\usepackage{multirow} % permite combinar celdas 
\usepackage{caption} % para personalizar el título de tablas y figuras
\usepackage{floatrow} % utilizamos este paquete y sus macros \ttabbox y \ffigbox para alinear los nombres de tablas y figuras de acuerdo con el estilo definido. Para su uso ver archivo de ejemplo 
\usepackage{array} % con este paquete podemos definir en la siguiente línea un nuevo tipo de columna para tablas: ancho personalizado y contenido centrado
\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}
\DeclareCaptionFormat{upper}{#1#2{#3}\par}

\usepackage{longtable}

% Diseño de tabla para ingeniería
\captionsetup[table]{
	format=upper,
	position=above,
	name=TABLA,
	justification=justified,
	labelsep=period,
	width=.75\linewidth,
	labelfont=small,
	font=small,
}

\usepackage{subfig}
\usepackage{graphicx}
\graphicspath{{images/}} %ruta a la carpeta de imágenes

% Diseño de figuras para ingeniería
\captionsetup[figure]{
	format=hang,
	name=Fig.,
	justification=justified,
	width=.9\linewidth,
	singlelinecheck=on,
	labelsep=period,
	labelfont=small,
	font=small		
}

% NOTAS A PIE DE PÁGINA
\usepackage{chngcntr} %para numeración contínua de las notas al pie
\counterwithout{footnote}{chapter}

% LISTADOS DE CÓDIGO
% soporte y estilo para listados de código. Más información en https://es.wikibooks.org/wiki/Manual_de_LaTeX/Listados_de_código/Listados_con_listings
\usepackage{listings}


% definimos un estilo de listings
\lstdefinestyle{estilo}{ frame=Ltb,
	framerule=0pt,
	aboveskip=0.5cm,
	framextopmargin=3pt,
	framexbottommargin=3pt,
	framexleftmargin=0.4cm,
	framesep=0pt,
	rulesep=.4pt,
	backgroundcolor=\color{gray97},
	rulesepcolor=\color{black},
	%
	basicstyle=\ttfamily\footnotesize,
	keywordstyle=\bfseries,
	stringstyle=\ttfamily,
	showstringspaces = false,
	commentstyle=\color{gray45},     
	%
	numbers=left,
	numbersep=15pt,
	numberstyle=\tiny,
	numberfirstline = false,
	breaklines=true,
	xleftmargin=\parindent
}

\captionsetup[lstlisting]{font=small, labelsep=period}
% fijamos el estilo a utilizar 
\lstset{style=estilo}
\renewcommand{\lstlistingname}{\uppercase{Código}}


% CONFIGURACIÓN PARA LA BIBLIOGRAFÍA IEEE
\usepackage[backend=bibtex, style=ieee, isbn=false,sortcites, maxbibnames=5, minbibnames=1]{biblatex}

% Configuración para el estilo de citas de IEEE, recomendado para el área de ingeniería. "maxbibnames" indica que a partir de 5 autores trunque la lista en el primero (minbibnames) y añada "et al." tal y como se utiliza en el estilo IEEE.
\addbibresource{bibliography/bibliography.bib}
% Añadimos las siguientes indicaciones para mejorar la adaptación de los estilos en español
\DefineBibliographyStrings{spanish}{andothers = {et\addabbrvspace al\adddot}}
\DefineBibliographyStrings{spanish}{url = {\adddot\space[En línea]\adddot\space Disponible en:}}
\DefineBibliographyStrings{spanish}{urlseen = {Acceso:}}
\DefineBibliographyStrings{spanish}{pages = {pp\adddot}, page = {p.\adddot}}


\usepackage{pdfpages}


%-------------
%	DOCUMENTO
%-------------

\begin{document}
	\pagenumbering{roman}
	
% PORTADA

\includepdf{caratula_tfg.pdf}

\newpage %página en blanco o de cortesía
\thispagestyle{empty}
\mbox{}
	

%----------
%	RESUMEN Y PALABRAS CLAVE
%----------	
\renewcommand\abstractname{\large\bfseries\filcenter\uppercase{Resumen - Abstract}}
\begin{abstract}
\thispagestyle{plain}
\setcounter{page}{2}
	
\paragraph{Palabras clave:}
Energía solar de concentración; Python; Concentrador Cilindroparabólico; CCP
	
En este trabajo se desarrolla una librería software en Python 3 en la que se implementan las clases necesarias para el modelado de un campo solar de colectores cilindroparabólicos (CCP). 

Se sigue una metodología basada en la Programación Orientada a Objetos, en la que cada sistema físico se modela mediante una Clase. El principal modelo matemático empleado para el calculo del rendimiento del concentrador solar es el Modelo de 4º Orden propuesto en \cite{barberofresnoDesarrolloModeloTeorico2018}. 

A partir del código desarrollado se muestran algunos ejemplos de aplicación para el análisis paramétrico de CCP y el análisis del rendimiento de un campo solar real.

\paragraph{Keywords:}
Concentrated Solar Energy; Python; Parabolic Trough Collectors; PTC

A software library in Python 3 is developed for the modelling of  solar field of parabolic-trough collectors (PTC)

A methodology based on Object Oriented Programming (OOP) is followed and each physical system is modeled through a Class. The main mathematical model used to calculate the performance of the solar concentrator is the $4^{th}$ Order Model proposed in \cite{barberofresnoDesarrolloModeloTeorico2018}.

Some application of the code are shown, including parametric analysis of PTC and the analysis of the performance of a real solar field.

\vfill
\end{abstract}
	
				



			
			



%----------
%	AGRADECIMIENTOS
%----------	
\chapter*{Agradecimientos}

Agradezco encarecidamente al profesor Rubén Barbero su dedicación, cercanía y paciencia. 

También quisiera mostrar mi agradecimiento y admiración hacia todas aquellas personas que comparten sus conocimientos y herramientas de forma desinteresada. Resulta sorprendente y esperanzador descubrir la cantidad de contenidos, explicaciones, tutoriales y herramientas de código que muchos hombres y mujeres  comparten públicamente, ayudando así al progreso de toda la comunidad.

\begin{figure}[b!]
\centering
\captionsetup{justification=centering}
\includegraphics[width=4.2cm]{images/creativecommons.png}
\caption*{Esta obra se encuentra sujeta a la licencia Creative Commons \\
 \textbf{Reconocimiento - No Comercial - Sin Obra Derivada}}
\end{figure}

\setcounter{page}{4}
		
	\vfill
	
	\newpage %página en blanco o de cortesía
	\thispagestyle{empty}
	\mbox{}
	

%----------
%	ÍNDICES
%----------	

%--
%Índice general
%-
\tableofcontents
\thispagestyle{fancy}

\newpage %página en blanco o de cortesía
\thispagestyle{empty}
\mbox{}

%--
%Índice de figuras. Si no se incluyen, comenta las líneas siguientes
%-
\listoffigures
\thispagestyle{fancy}

\newpage %página en blanco o de cortesía
\thispagestyle{empty}
\mbox{}

%--
%Índice de tablas. Si no se incluyen, comenta las líneas siguientes
%-
\listoftables
\thispagestyle{fancy}

\newpage %página en blanco o de cortesía
\thispagestyle{empty}
\mbox{}


%----------
%	TRABAJO
%----------	
\clearpage
\pagenumbering{arabic} % numeración con números arábigos para el resto de la publicación	

\input{chapters/ch01}
\input{chapters/ch02}
\input{chapters/ch03}
\input{chapters/ch04}
\input{chapters/ch05}


%----------
%	BIBLIOGRAFÍA
%----------	

% \nocite{*} % Si quieres que aparezcan en la bibliografía todos los documentos que la componen (también los que no estén citados en el texto) descomenta está lína

\clearpage
\setquotestyle[english]{british} % Cambiamos el tipo de cita porque en el estilo IEEE se usan las comillas inglesas.
\printbibliography
\addcontentsline{toc}{chapter}{Bibliografía}


%----------
%	ANEXOS
%----------	

% Si tu trabajo incluye anexos, puedes descomentar las siguientes líneas
\input{chapters/glosario}
\addcontentsline{toc}{chapter}{Glosario}
%\pagenumbering{gobble} % Las páginas de los anexos no se numeran


\clearpage
\chapter* {Anexo B. Código Fuente: csenergy.py}
\includepdf[pages=-] {chapters/csenergy.pdf}
\addcontentsline{toc}{chapter}{Código Fuente: csenergy.py}
\pagenumbering{gobble}

\clearpage
\chapter* {Anexo C. Código Fuente: interface.py}
\includepdf[pages=-] {chapters/interface.pdf}
\addcontentsline{toc}{chapter}{Código Fuente: interface.py}
\pagenumbering{gobble}




\end{document}